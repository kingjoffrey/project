<h1><?php echo $this->translate('Load game') ?></h1>
<div class="table">
    <h2><?php echo $this->translate('Games list') ?></h2>
    <table>
        <tr>
            <th>
                <div style="padding: 5px"><?php echo $this->translate('Game master') ?></div>
                <hr style="border: 1px solid #fff">
                <div style="padding: 5px"><?php echo $this->translate('Start date') ?></div>
            </th>
            <th>
                <!--                --><?php //echo $this->translate('Number of Players') ?>
                <!--                <br>-->
                <?php echo $this->translate('Time limit') ?>
                <br>
                <?php echo $this->translate('Turns limit') ?>
                <br>
                <?php echo $this->translate('Time limit per turn') ?>
            </th>
            <th><?php echo $this->translate('Player name') ?> <?php echo $this->translate('Player color') ?> <?php echo $this->translate('Team color') ?> <?php echo $this->translate('Kingdom name') ?></th>
            <th>
                <div style="padding: 5px"><?php echo $this->translate('Turn nr') ?></div>
                <hr style="border: 1px solid #fff">
                <div style="padding: 5px"><?php echo $this->translate('Player turn') ?></div>
                <hr style="border: 1px solid #fff">
                <div style="padding: 5px"><?php echo $this->translate('Pause date') ?></div>
            </th>
        </tr>
        <?php if (count($this->myGames)): ?>
            <?php foreach ($this->myGames as $game): ?>
                <tr id="gid<?php echo $game['gameId'] ?>"
                    onclick="window.location.href = '<?php echo '/' . Zend_Registry::get('lang') . '/game/index/id/' . $game['gameId'] ?>';"
                    class="trlink">
                    <td>
                        <div><?php echo $game['players'][$game['gameMasterId']]['firstName'] . ' ' . $game['players'][$game['gameMasterId']]['lastName'] ?></div>
                        <hr style="border: 1px solid #878967">
                        <div><?php echo Coret_View_Helper_Formatuj::date($game['begin']) ?></div>
                    </td>
                    <td>
                        <!--                        --><?php //echo $game['numberOfPlayers'] ?>
                        <!--                        <br>-->
                        <?php echo $this->translate($this->timeLimits[$game['timeLimit']]) ?>
                        <br>
                        <?php if ($game['turnsLimit']): echo $game['turnsLimit'];
                        else: echo $this->translate('no limit'); endif ?>
                        <br>
                        <?php echo $this->translate($this->turnTimeLimit[$game['turnTimeLimit']]) ?>
                    </td>
                    <td style="min-width: 500px">
                        <?php foreach ($game['players'] as $v): ?>
                            <div>
                                <div
                                    style="height: 34px;float: left;line-height: 34px;width: 285px"><?php echo $v['firstName'] . ' ' . $v['lastName'] ?></div>
                                <div style="width:80px;height: 34px;float: left">
                                    <img src="/img/game/heroes/<?php echo $v['color'] ?>.png"
                                         style="display:inline-block;box-shadow: 24px 0 3px <?php echo $game['teams'][$v['team']] ?>;margin:2px"/>
                                </div>
                                <div
                                    style="height: 34px;float: left;line-height: 34px"><?php echo $v['longName'] ?></div>
                            </div>
                        <?php endforeach ?>
                    </td>
                    <td>
                        <div><?php echo $game['turnNumber'] ?></div>
                        <hr style="border: 1px solid #878967">
                        <div><?php echo $game['playerTurn']['firstName'] . ' ' . $game['playerTurn']['lastName'] ?></div>
                        <hr style="border: 1px solid #878967">
                        <div><?php echo Coret_View_Helper_Formatuj::date($game['end']) ?></div>
                    </td>
                </tr>
            <?php endforeach ?>
        <?php endif ?>
    </table>
    <?php if (!count($this->myGames)): ?>
        <p id="info"><?php echo $this->translate('There are no games to load') ?></p>
    <?php endif ?>
</div>
<?php echo $this->paginationControl($this->myGames, 'Sliding', 'pagination_control.phtml'); ?>
<a href="/" class="button">&laquo; <?php echo $this->translate('Back') ?></a>
